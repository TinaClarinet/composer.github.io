var toggler=document.querySelector(".nav-toggler"),navWrap=document.querySelector(".top-fixed-wrap");toggler.onclick=function(){navWrap.classList.toggle("nav-wrap-mob"),navWrap.classList.contains("nav-wrap-mob")?toggler.style.backgroundImage='url("img/menu-icon2.jpg")':toggler.style.backgroundImage='url("img/menu-icon1.jpg")'};var itemDeleteBtn,clearBasketBtn,basketSection=document.querySelector(".basket-section"),deliverySection=document.querySelector(".delivery-section"),orderConfirmedSection=document.querySelector(".confirm-order-section"),orderContainer=document.querySelector(".order-container"),chooseDiv=document.querySelector("#choose-div"),totalWrap=document.querySelector(".total-wrap"),total=document.querySelector(".total"),requestsWrap=document.querySelector(".requests-wrap"),moneyQuantity=document.querySelector(".money-quantity"),totalPrice=0,basket=JSON.parse(localStorage.getItem("basket"));function createItem(){"use strict";var e,t,r,n,o,s;for(e in basket)t=document.createElement("div"),r=document.createElement("img"),n=document.createElement("p"),o=document.createElement("p"),s=document.createElement("p"),orderContainer.appendChild(t),t.classList.add("order-item"),itemDeleteBtn=itemDeleteBtn.cloneNode(!0),t.appendChild(itemDeleteBtn),itemDeleteBtn.id=basket[e][4],itemDeleteBtn.style.display="inline",t.appendChild(r),r.src=basket[e][0],r.classList.add("item-img"),n.innerHTML=basket[e][1],t.appendChild(n),n.classList.add("item-title"),o.innerHTML=basket[e][2]+" "+basket[e][5],t.appendChild(o),o.classList.add("item-quantity"),s.innerHTML="$"+basket[e][3],t.appendChild(s),s.classList.add("item-price"),totalPrice+=basket[e][3];moneyQuantity.innerHTML=totalPrice}function removeExtraButtons(){"use strict";var e=document.querySelector(".delete-product"),t=document.querySelector(".delete-product-mob");e.remove(),t.remove()}clearBasketBtn=window.matchMedia("(max-width: 1280px)").matches?(itemDeleteBtn=document.querySelector(".delete-product-mob"),document.querySelector(".clear-basket-mob")):(itemDeleteBtn=document.querySelector(".delete-product"),document.querySelector(".clear-basket")),removeExtraButtons(),localStorage.getItem("basket")&&(chooseDiv.style.display="none",orderContainer.style.display="block",totalWrap.style.display="grid",requestsWrap.style.display="flex",createItem());var itemDeleteButtons=document.getElementsByClassName("remove-product-btn");function removeItem(){var e,t,r=this.id;for(e in basket)basket[e][4]===r&&(totalPrice-=basket[e][3],moneyQuantity.innerHTML=totalPrice,delete basket[e]);this.parentElement.remove(),null===document.querySelector(".order-item")?(localStorage.clear(),orderContainer.style.display="none",totalWrap.style.display="none",requestsWrap.style.display="none",chooseDiv.style.display="block"):(t=JSON.stringify(basket),localStorage.setItem("basket",t))}for(i=0;i<itemDeleteButtons.length;i+=1)itemDeleteButtons[i].addEventListener("click",removeItem,!1);function clearBasket(){"use strict";for(var e=document.querySelectorAll(".order-item"),t=0;t<e.length;t+=1)e[t].remove();localStorage.clear(),orderContainer.style.display="none",totalWrap.style.display="none",requestsWrap.style.display="none",chooseDiv.style.display="block"}clearBasketBtn.onclick=clearBasket;var addRequestsBtn=document.querySelector("#requests"),requestsImg=document.querySelector("#requests-img"),requestsDiv=document.querySelector(".order-requests"),requestsTextWrap=document.querySelector(".requests-text-wrap"),requestsTextarea=document.querySelector("#requests-textarea"),saveRequestsBtn=document.querySelector(".save-requests-btn");addRequestsBtn.onmouseover=function(){"use strict";requestsImg.src="img/chocoicon2.png"},addRequestsBtn.onmouseout=function(){"use strict";requestsImg.src="img/chocoicon1.png"},requestsDiv.onclick=function(){"use strict";requestsDiv.style.display="none",requestsTextWrap.style.display="flex"},saveRequestsBtn.onclick=function(){"use strict";requestsTextarea.value="Хотеть не вредно!",setTimeout(function(){requestsTextWrap.style.display="none",requestsDiv.style.display="flex"},3e3)};var orderButton=document.querySelector(".order-now-btn"),confirmBtn=document.querySelector(".confirm-btn"),returnBtn=document.querySelector(".return-btn"),returnAfterConfirmBtn=document.querySelector(".return-after-confirm"),errorMessage=document.querySelector("#modal-window-wrap"),errorCloseBtn=document.querySelector("#modal-window-btn");function basketToOrder(){"use strict";basketSection.style.display="none",deliverySection.style.display="block"}function returnToBasket(){"use strict";deliverySection.style.display="none",basketSection.style.display="block"}orderButton.addEventListener("click",basketToOrder),returnBtn.addEventListener("click",returnToBasket);var address=document.querySelector("#address-container"),phone=document.querySelector("#phone-container"),deliverySelect=document.querySelector("#delivery-sel");function getValue(){"use strict";"export"===deliverySelect.value?address.style.display="none":address.style.display="block"}var contactFormInputs={nameP:document.querySelector("#first-name-p"),lastNameP:document.querySelector("#last-name-p"),phoneP:document.querySelector("#phone-p"),addressP:document.querySelector("#address-p"),nameInput:document.querySelector("#first-name-input"),lastNameInput:document.querySelector("#last-name-input"),phoneInput:document.querySelector("#phone-input"),addressInput:document.querySelector("#address-input"),allInputs:document.querySelectorAll("input[data-rule]")};for(let e of contactFormInputs.allInputs)e.addEventListener("blur",inputsValidate);function inputsValidate(){var e=this.dataset.rule,t=this.value;let r;switch(e){case"name":r=/^[а-яА-ЯЁё-]{2,25}$/.test(t);break;case"phone":r=/^[\+380[0]+[0-9]{9}$/.test(t);break;case"address":r=/^[а-яА-ЯЁё]+\s[а-яА-ЯЁё\s]*[0-9]{1,3}[0-9а-я//?]*\,\sкв\.\s[0-9]{1,3}$/.test(t)}this.classList.remove("valid"),this.classList.remove("invalid"),r?this.classList.add("valid"):this.classList.add("invalid")}function checkForm(){let e=[];for(var t of contactFormInputs.allInputs)t.classList.contains("valid")&&e.push(t);return 4==e.length}function confirmOrder(){"use strict";1==checkForm()?(deliverySection.style.display="none",orderConfirmedSection.style.display="block"):(errorMessage.style.display="block",errorCloseBtn.onclick=function(){errorMessage.style.display="none"}),returnAfterConfirmBtn.onclick=function(){orderConfirmedSection.style.display="none",basketSection.style.display="block","undefined"!==clearBasketBtn&&clearBasket.call(clearBasketBtn)}}confirmBtn.addEventListener("click",confirmOrder);var enterBtn=document.querySelector(".enter");function toEnterPage(){window.location.href="enter.html"}enterBtn.addEventListener("click",toEnterPage);