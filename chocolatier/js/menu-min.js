var toggler=document.querySelector(".nav-toggler"),navWrap=document.querySelector(".top-fixed-wrap");toggler.onclick=function(){navWrap.classList.toggle("nav-wrap-mob"),navWrap.classList.contains("nav-wrap-mob")?toggler.style.backgroundImage='url("img/menu-icon2.jpg")':toggler.style.backgroundImage='url("img/menu-icon1.jpg")'};var obj={dialog:document.querySelector("#dialog"),dialogBg:document.querySelector("#dialog-bg"),dialogImg:document.querySelector("#dialog-img"),dialogTitle:document.querySelector("#dialog-title"),dialogKg:document.querySelector("#kg"),requests:document.querySelector("#requests"),addBtn:document.querySelector(".add-btn"),input:document.querySelector("input"),quantity:document.querySelector("#quantity-number"),quantityNumber:1,plusBtn:document.querySelector("#plus-btn"),minusBtn:document.querySelector("#minus-btn"),cardClose:document.querySelector("#card-close-btn"),orderBtn:document.querySelector(".card-order-btn"),productId:0,activeImg:0};function saveImage(){obj.activeImg=this.src}function saveImageBtn(){var e=this.parentElement;obj.activeImg=e.querySelector(".menu-img").src}for(var menuImg=document.getElementsByClassName("menu-img"),i=0;i<menuImg.length;i++)menuImg[i].addEventListener("click",cardOpen,!1),menuImg[i].addEventListener("click",saveImage,!1);for(var itemBucketBtn=document.getElementsByClassName("menu-btn"),i=0;i<itemBucketBtn.length;i++)itemBucketBtn[i].addEventListener("click",cardOpen,!1),itemBucketBtn[i].addEventListener("click",saveImageBtn,!1);for(var basketIcon=document.getElementsByClassName("basket-icon"),i=0;i<basketIcon.length;i++)basketIcon[i].addEventListener("click",cardOpen,!1),basketIcon[i].addEventListener("click",saveImageBtn,!1);function cardOpen(){obj.dialogBg.style.display="flex",this.parentElement.classList.add("active");var e=document.querySelector(".active"),t=e.firstElementChild.cloneNode(!0);obj.dialog.appendChild(t),obj.dialog.replaceChild(t,obj.dialogImg),t.style.display="inline";var n=e.querySelector(".item-title");obj.dialogTitle.innerHTML=n.innerHTML,obj.productId=n.getAttribute("data-id"),-1==n.innerHTML.indexOf("Трюфель")?obj.dialogKg.innerHTML="шт":obj.dialogKg.innerHTML="кг",obj.requests.onmouseover=function(){obj.requests.style.color="#F2C098",obj.addBtn.src="menu-img/add-btn1.png"},obj.requests.onmouseout=function(){obj.requests.style.color="#BC9373",obj.addBtn.src="menu-img/add-btn.png"},obj.requests.onclick=function(){obj.requests.style.display="none",obj.input.style.display="block"},obj.plusBtn.onclick=function(){obj.quantity.textContent<10&&(obj.quantity.textContent++,obj.quantityNumber+=1)},obj.minusBtn.onclick=function(){1<obj.quantity.textContent&&(obj.quantity.textContent--,--obj.quantityNumber)};var o=0;obj.orderBtn.onclick=function(){var e;return obj.orderBtn.disabled=!0,o=JSON.parse(localStorage.getItem("basket"))||{},itemImg=obj.activeImg,n=obj.dialogTitle.innerHTML,itemQuantity=obj.quantityNumber,itemPrice=90*itemQuantity,itemId=obj.productId,itemKg=obj.dialogKg.innerHTML,o.hasOwnProperty(itemId)?(e=JSON.parse(o[itemId][2]),e=itemQuantity+e,o[itemId][2]=e,o[itemId][3]=90*e):o[itemId]=[itemImg,n,itemQuantity,itemPrice,itemId,itemKg],basket=JSON.stringify(o),localStorage.setItem("basket",basket),obj.orderBtn.disabled=!1,alert("Товар добавлен в корзину"),!1},obj.cardClose.onclick=function(){obj.dialogBg.removeAttribute("style"),e.classList.remove("active"),t.classList.remove("hidden-img"),t.id="#dialog-img",obj.dialogImg=t,obj.input.style.display="none",obj.requests.style.display="block"}}